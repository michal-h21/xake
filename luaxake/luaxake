#!/usr/bin/env texlua
kpse.set_program_name "luatex"

logging = require("make4ht-logging")


config = {
  -- list of extensions of output files
  output_formats = {"html", "pdf"},
  -- number of lines in tex files where we should look for \documentclass
  documentclass_lines = 30,
}

local files = require "luaxake-files"
local compile = require "luaxake-compile"


local dir = arg[1] or "."


local to_be_compiled, tex_files = files.needing_compilation(dir)

for _, meta in ipairs(to_be_compiled) do
  print(meta.absolute_path)
  compile.compile(meta, "pdflatex @{filename}")
end


